# Firestore 교양 문서 선택 알고리즘 가이드

## 핵심 원칙

**0순위**: Firestore에서 실제 문서 존재 여부를 먼저 조회한 후 알고리즘 적용

## 알고리즘 순서

1. **1순위 조회**: 학과 전용 문서 (`교양_{학과명}_{연도}`)
   - Firestore에서 실제 존재 여부 확인
   - 존재하면 → 해당 문서 사용
   - 존재하지 않으면 → 2순위로 진행

2. **2순위 조회**: 공통 문서 (`교양_공통_{연도}`)
   - Firestore에서 실제 존재 여부 확인
   - 존재하면 → 해당 문서 사용
   - 존재하지 않으면 → 오류 발생

3. **오류**: 둘 다 존재하지 않으면 명확한 오류 메시지
   - 실제 조회 시도한 문서명들을 모두 표시

## 실제 Firestore 존재 현황 (2025년 9월 기준)

### IT학부
- **2020-2022학번**: `교양_IT학부_XXXX` **존재하지 않음** → `교양_공통_XXXX` 사용
- **2023-2025학번**: `교양_IT학부_XXXX` **존재함** → `교양_IT학부_XXXX` 사용

### 태권도학과
- **모든 연도**: `교양_태권도학과_XXXX` **존재하지 않음** → `교양_공통_XXXX` 사용

## 문서 매핑 작성 규칙

1. **하드코딩 금지**: 우선순위나 특정 로직을 하드코딩하지 않음
2. **실제 존재 기준**: Firestore에서 실제로 존재하는 문서명만 기록
3. **깔끔한 표기**: 괄호나 추가 설명 없이 문서명만 표기
4. **알고리즘 신뢰**: 0순위 조회 결과를 신뢰하여 최종 선택된 문서명만 기록

## 예시

### 올바른 표기
```
- **교양 강의**: `교양_IT학부_2023`
- **교양 강의**: `교양_공통_2020`
```

### 잘못된 표기
```
❌ - **교양 강의**: `교양_IT학부_2020` → `교양_공통_2020` (알고리즘 선택)
❌ - **교양 강의**: `교양_IT학부_2020` 또는 `교양_공통_2020`
❌ - **교양 강의**: `교양_IT학부_2023` (1순위 전용 문서 사용)
```

## 코드 구현 확인사항

- `loadGeneralEducationCourses()` 메서드가 이 알고리즘을 정확히 구현하고 있음
- 실제 Firestore 조회 → 존재 확인 → 문서 사용 순서로 진행
- 하드코딩된 우선순위 없이 순수하게 존재 여부만 확인

## 확장성

- 새로운 학과에 전용 교양 문서 추가 시 **코드 수정 불필요**
- Firestore에 문서만 추가하면 알고리즘이 자동으로 감지
- 문서 매핑 파일은 실제 존재하는 문서명으로 업데이트

---

*이 가이드를 참고하여 실수 없이 문서 매핑을 관리하세요.*