# Firestore 문서 참조 매핑

이 문서는 학번, 학과, 트랙별로 어떤 Firestore 문서를 참조하는지 정리한 것입니다.

## 문서 참조 규칙

### 학번별 데이터 매핑
- **모든 학번**: 해당 연도 그대로 사용 (2020~2025)

### 카테고리별 설정
- **체육학과**: 모든 연도에서 `전공심화` 사용
- **IT학부**: 20-22학번은 `학부공통`, 23-25학번은 `전공심화` 사용

### 📋 교양 문서 선택 알고리즘 (존재 여부 확인 방식)
**0순위**: Firestore에서 실제 문서 존재 여부를 조회한 후 알고리즘 적용:

1. **1순위 조회**: 학과 전용 문서 (`교양_{학과명}_{연도}`)
   - Firestore에서 실제 존재 확인
   - 존재하면 즉시 사용 (예: `교양_IT학부_2023`)

2. **2순위 조회**: 공통 문서 (`교양_공통_{연도}`)
   - 1순위가 존재하지 않을 때만 조회
   - 존재하면 사용 (예: `교양_공통_2020`)

3. **오류**: 둘 다 존재하지 않으면 명확한 오류 메시지
   - 실제 조회 시도한 문서명들을 모두 표시

---

## IT학부

### IT학부 멀티미디어 트랙

#### **2020학번**
- **졸업요건/졸업이수학점**: `IT학부_멀티미디어_2020`
- **전공필수 강의**: `IT학부_멀티미디어_2020`
- **전공선택 강의**: `IT학부_멀티미디어_2020`
- **학부공통 강의**: `IT학부_멀티미디어_2020` (카테고리: `학부공통`)
- **교양 강의**: `교양_공통_2020`

#### **2021학번**
- **졸업요건/졸업이수학점**: `IT학부_멀티미디어_2021`
- **전공필수 강의**: `IT학부_멀티미디어_2021`
- **전공선택 강의**: `IT학부_멀티미디어_2021`
- **학부공통 강의**: `IT학부_멀티미디어_2021` (카테고리: `학부공통`)
- **교양 강의**: `교양_공통_2021`

#### **2022학번**
- **졸업요건/졸업이수학점**: `IT학부_멀티미디어_2022`
- **전공필수 강의**: `IT학부_멀티미디어_2022`
- **전공선택 강의**: `IT학부_멀티미디어_2022`
- **학부공통 강의**: `IT학부_멀티미디어_2022` (카테고리: `학부공통`)
- **교양 강의**: `교양_공통_2022`

#### **2023학번**
- **졸업요건/졸업이수학점**: `IT학부_멀티미디어_2023`
- **전공필수 강의**: `IT학부_멀티미디어_2023`
- **전공선택 강의**: `IT학부_멀티미디어_2023`
- **전공심화 강의**: `IT학부_멀티미디어_2023` (카테고리: `전공심화`)
- **교양 강의**: `교양_IT학부_2023`

#### **2024학번**
- **졸업요건/졸업이수학점**: `IT학부_멀티미디어_2024`
- **전공필수 강의**: `IT학부_멀티미디어_2024`
- **전공선택 강의**: `IT학부_멀티미디어_2024`
- **전공심화 강의**: `IT학부_멀티미디어_2024` (카테고리: `전공심화`)
- **교양 강의**: `교양_IT학부_2024`

#### **2025학번**
- **졸업요건/졸업이수학점**: `IT학부_멀티미디어_2025`
- **전공필수 강의**: `IT학부_멀티미디어_2025`
- **전공선택 강의**: `IT학부_멀티미디어_2025`
- **전공심화 강의**: `IT학부_멀티미디어_2025` (카테고리: `전공심화`)
- **교양 강의**: `교양_IT학부_2025`

### IT학부 인공지능 트랙

#### **2020학번**
- **졸업요건/졸업이수학점**: `IT학부_인공지능_2020`
- **전공필수 강의**: `IT학부_인공지능_2020`
- **전공선택 강의**: `IT학부_인공지능_2020`
- **학부공통 강의**: `IT학부_인공지능_2020` (카테고리: `학부공통`)
- **교양 강의**: `교양_공통_2020`

#### **2021학번**
- **졸업요건/졸업이수학점**: `IT학부_인공지능_2021`
- **전공필수 강의**: `IT학부_인공지능_2021`
- **전공선택 강의**: `IT학부_인공지능_2021`
- **학부공통 강의**: `IT학부_인공지능_2021` (카테고리: `학부공통`)
- **교양 강의**: `교양_공통_2021`

#### **2022학번**
- **졸업요건/졸업이수학점**: `IT학부_인공지능_2022`
- **전공필수 강의**: `IT학부_인공지능_2022`
- **전공선택 강의**: `IT학부_인공지능_2022`
- **학부공통 강의**: `IT학부_인공지능_2022` (카테고리: `학부공통`)
- **교양 강의**: `교양_공통_2022`

#### **2023학번**
- **졸업요건/졸업이수학점**: `IT학부_인공지능_2023`
- **전공필수 강의**: `IT학부_인공지능_2023`
- **전공선택 강의**: `IT학부_인공지능_2023`
- **전공심화 강의**: `IT학부_인공지능_2023` (카테고리: `전공심화`)
- **교양 강의**: `교양_IT학부_2023`

#### **2024학번**
- **졸업요건/졸업이수학점**: `IT학부_인공지능_2024`
- **전공필수 강의**: `IT학부_인공지능_2024`
- **전공선택 강의**: `IT학부_인공지능_2024`
- **전공심화 강의**: `IT학부_인공지능_2024` (카테고리: `전공심화`)
- **교양 강의**: `교양_IT학부_2024`

#### **2025학번**
- **졸업요건/졸업이수학점**: `IT학부_인공지능_2025`
- **전공필수 강의**: `IT학부_인공지능_2025`
- **전공선택 강의**: `IT학부_인공지능_2025`
- **전공심화 강의**: `IT학부_인공지능_2025` (카테고리: `전공심화`)
- **교양 강의**: `교양_IT학부_2025`

### IT학부 정보통신 트랙

#### **2020학번**
- **졸업요건/졸업이수학점**: `IT학부_정보통신_2020`
- **전공필수 강의**: `IT학부_정보통신_2020`
- **전공선택 강의**: `IT학부_정보통신_2020`
- **학부공통 강의**: `IT학부_정보통신_2020` (카테고리: `학부공통`)
- **교양 강의**: `교양_공통_2020`

#### **2021학번**
- **졸업요건/졸업이수학점**: `IT학부_정보통신_2021`
- **전공필수 강의**: `IT학부_정보통신_2021`
- **전공선택 강의**: `IT학부_정보통신_2021`
- **학부공통 강의**: `IT학부_정보통신_2021` (카테고리: `학부공통`)
- **교양 강의**: `교양_공통_2021`

#### **2022학번**
- **졸업요건/졸업이수학점**: `IT학부_정보통신_2022`
- **전공필수 강의**: `IT학부_정보통신_2022`
- **전공선택 강의**: `IT학부_정보통신_2022`
- **학부공통 강의**: `IT학봄_정보통신_2022` (카테고리: `학부공통`)
- **교양 강의**: `교양_공통_2022`

#### **2023학번**
- **졸업요건/졸업이수학점**: `IT학부_정보통신_2023`
- **전공필수 강의**: `IT학부_정보통신_2023`
- **전공선택 강의**: `IT학부_정보통신_2023`
- **전공심화 강의**: `IT학부_정보통신_2023` (카테고리: `전공심화`)
- **교양 강의**: `교양_IT학부_2023`

#### **2024학번**
- **졸업요건/졸업이수학점**: `IT학부_정보통신_2024`
- **전공필수 강의**: `IT학부_정보통신_2024`
- **전공선택 강의**: `IT학부_정보통신_2024`
- **전공심화 강의**: `IT학부_정보통신_2024` (카테고리: `전공심화`)
- **교양 강의**: `교양_IT학부_2024`

#### **2025학번**
- **졸업요건/졸업이수학점**: `IT학부_정보통신_2025`
- **전공필수 강의**: `IT학부_정보통신_2025`
- **전공선택 강의**: `IT학부_정보통신_2025`
- **전공심화 강의**: `IT학부_정보통신_2025` (카테고리: `전공심화`)
- **교양 강의**: `교양_IT학부_2025`

---

## 태권도학과

### 트랙없음

#### **2020학번**
- **졸업요건/졸업이수학점**: `태권도학과_태권도_2020`
- **전공필수 강의**: `태권도학과_태권도_2020`
- **전공선택 강의**: `태권도학과_태권도_2020`
- **전공심화 강의**: `태권도학과_태권도_2020` (카테고리: `전공심화`) ⭐
- **교양 강의**: `교양_공통_2020`

#### **2021학번**
- **졸업요건/졸업이수학점**: `태권도학과_태권도_2021`
- **전공필수 강의**: `태권도학과_태권도_2021`
- **전공선택 강의**: `태권도학과_태권도_2021`
- **전공심화 강의**: `태권도학과_태권도_2021` (카테고리: `전공심화`) ⭐
- **교양 강의**: `교양_공통_2021`

#### **2022학번**
- **졸업요건/졸업이수학점**: `태권도학과_태권도_2022`
- **전공필수 강의**: `태권도학과_태권도_2022`
- **전공선택 강의**: `태권도학과_태권도_2022`
- **전공심화 강의**: `태권도학과_태권도_2022` (카테고리: `전공심화`) ⭐
- **교양 강의**: `교양_공통_2022`

#### **2023학번**
- **졸업요건/졸업이수학점**: `태권도학과_태권도_2023`
- **전공필수 강의**: `태권도학과_태권도_2023`
- **전공선택 강의**: `태권도학과_태권도_2023`
- **전공심화 강의**: `태권도학과_태권도_2023` (카테고리: `전공심화`)
- **교양 강의**: `교양_공통_2023`

#### **2024학번**
- **졸업요건/졸업이수학점**: `태권도학과_태권도_2024`
- **전공필수 강의**: `태권도학과_태권도_2024`
- **전공선택 강의**: `태권도학과_태권도_2024`
- **전공심화 강의**: `태권도학과_태권도_2024` (카테고리: `전공심화`)
- **교양 강의**: `교양_공통_2024`

#### **2025학번**
- **졸업요건/졸업이수학점**: `태권도학과_태권도_2025`
- **전공필수 강의**: `태권도학과_태권도_2025`
- **전공선택 강의**: `태권도학과_태권도_2025`
- **전공심화 강의**: `태권도학과_태권도_2025` (카테고리: `전공심화`)
- **교양 강의**: `교양_공통_2025`

---

## 주요 특징

### ⭐ 태권도학과 특수사항
- **2020-2022학번**에서도 `전공심화` 카테고리 사용 (IT학부는 `학부공통` 사용)
- 모든 연도에서 학부공통 없이 전공심화만 존재

### 🔄 교양 문서 선택 알고리즘 (Firestore 조회 기반)
**핵심**: 하드코딩된 우선순위가 아닌 **실제 Firestore 문서 존재 여부 조회**

1. **1순위 조회**: 학과 전용 문서 (`교양_{학과명}_{연도}`)
   - Firestore에서 실제 존재 확인 후 사용
2. **2순위 조회**: 공통 문서 (`교양_공통_{연도}`)
   - 1순위가 존재하지 않을 때만 Firestore 조회
3. **오류**: 둘 다 Firestore에 존재하지 않으면 오류

### 🔍 오류 처리
- **전공 관련 문서**: **1순위만** 시도하여 즉시 오류 발생
- **교양 문서**: 2단계 알고리즘으로 시도한 후 오류 발생
- 예시: `"교양 문서를 찾을 수 없습니다. 시도한 문서: [교양_체육학과_2024, 교양_공통_2024]"`

### 📁 컬렉션 정보
- **메인 데이터**: `graduation_requirements` 컬렉션
- **총 학점 정보**: `graduation_meta/catalog/departments/{department}` 경로

### 🚀 확장성
- 새로운 학과에 전용 교양 문서 추가 시 **코드 수정 불필요**
- Firestore 조회 알고리즘이 자동으로 감지하여 우선 선택
- 실제 존재 여부만 확인하므로 하드코딩 없음

---

### 📅 시간표 데이터 구조 (신규 추가)

**컬렉션**: `users/{userId}/timetables`

#### 시간표 문서 구조
```json
{
  "subjectName": "컴퓨터프로그래밍",
  "professorName": "김교수",
  "location": "베어드홀 123호",
  "dayOfWeek": "월",
  "startTime": "09:00",
  "endTime": "10:30",
  "credits": 3,
  "color": "#4CAF50",
  "createdAt": "2025-09-28T10:00:00Z",
  "updatedAt": "2025-09-28T10:00:00Z"
}
```

#### 주요 특징
- **개인별 시간표**: 사용자별로 독립적인 시간표 관리
- **시간 충돌 검사**: 클라이언트 사이드에서 중복 시간 체크
- **유연한 시간 형식**: "HH:mm" 형태의 24시간 표기법
- **컬러 시스템**: 과목별 구분을 위한 색상 코드
- **CRUD 지원**: 추가/편집/삭제 모든 기능 지원

---

*최종 업데이트: 2025년 9월 28일 (시간표 기능 추가, 존재 여부 확인 알고리즘 적용)*